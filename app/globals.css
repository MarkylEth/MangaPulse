/* app/globals.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   CSS ПЕРЕМЕННЫЕ ДЛЯ ЦЕНТРАЛИЗОВАННЫХ ЦВЕТОВ
   ======================================== */
@layer base {
  :root {
    /* Светлая тема */
    --background: 255 255 255;
    --foreground: 0 0 0;
    --card: 245 245 245;
    --card-foreground: 0 0 0;
    --muted: 245 245 245;
    --muted-foreground: 115 115 115;
    --border: 229 229 229;
    --accent: 99 102 241; /* indigo-500 */

    /* Scrollbar vars — light */
    --scrollbar-track: 226 232 240;       /* #e2e8f0 */
    --scrollbar-thumb: 203 213 225;       /* #cbd5e1 */
    --scrollbar-thumb-hover: 148 163 184; /* #94a3b8 */
  }

  .dark {
    /* Тёмная тема - zinc */
    --background: 9 9 11;        /* zinc-950 */
    --foreground: 244 244 245;   /* zinc-100 */
    --card: 24 24 27;            /* zinc-900 */
    --card-foreground: 244 244 245;
    --muted: 39 39 42;           /* zinc-800 */
    --muted-foreground: 161 161 170; /* zinc-400 */
    --border: 39 39 42;          /* zinc-800 */
    --accent: 129 140 248;       /* indigo-400 */

    /* Scrollbar vars — dark */
    --scrollbar-track: 30 41 59;          /* #1e293b */
    --scrollbar-thumb: 71 85 105;         /* #475569 */
    --scrollbar-thumb-hover: 100 116 139; /* #64748b */
  }

  body {
    @apply bg-background text-foreground;
  }
}

/* Системные цвета нативных элементов (инпуты, скроллбары и т.п.) */
:root { color-scheme: light dark; }

/* =========================
   Глобальные фоны по теме
   (класс темы ставится на <html>)
   ========================= */

/* Спойлер-блок в новостях */
.spoiler-blur{
  display: inline;                 /* строго inline */
  cursor: pointer;
  color: transparent;              /* прячем текст */
  text-shadow: 0 0 .65em rgb(var(--foreground) / .95); /* “блюр” без сдвига верстки */
  user-select: none;               /* нельзя копировать скрытое */
  transition: color .15s ease, text-shadow .15s ease;
}

.spoiler-blur.revealed{
  color: inherit;                  /* показываем текст */
  text-shadow: none;
  user-select: text;
}

/* a11y */
.spoiler-blur:focus-visible{
  outline: 2px solid rgb(var(--accent) / .55);
  outline-offset: 2px;
}

/* при выделении скрытого ничего не видно */
.spoiler-blur:not(.revealed)::selection{
  background: transparent;
  color: transparent;
}
/* Светлая тема для спойлеров */
html.light details.spoiler {
  background: rgba(100, 100, 100, 0.12);
  border: 1px solid rgba(100, 100, 100, 0.2);
}
html.light details.spoiler summary { color: rgba(80, 80, 80, 0.85); }

/* Поддержка системной настройки «уменьшить анимацию» */
@media (prefers-reduced-motion: reduce) {
  html.dark, html.light { animation: none !important; }
}

/* =========================
   Режим «чёрный ридер»
   Применяй класс reader-force-dark на <html> или <body>
   ========================= */
html.reader-force-dark,
body.reader-force-dark {
  background: #000 !important;
  animation: none !important;

  /* Переопределяем цвета скролла под «чёрный ридер» */
  --scrollbar-track: 10 10 10;    /* #0a0a0a */
  --scrollbar-thumb: 42 42 42;    /* #2a2a2a */
  --scrollbar-thumb-hover: 58 58 58; /* #3a3a3a */
}

/* анимация градиента */
@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* =========================
   Полезные утилиты
   ========================= */
@layer utilities {
  .text-balance { text-wrap: balance; }
  .line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
  }
  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }
}

/* =========================
   ЕДИНЫЙ стиль скроллбаров (для обеих тем)
   ========================= */

/* Firefox */
html,
.nice-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: rgb(var(--scrollbar-thumb)) transparent;
}


/* WebKit (Chrome/Edge/Safari) */
html::-webkit-scrollbar,
.nice-scrollbar::-webkit-scrollbar {
  width: 8px;   /* толщина вертикального */
  height: 8px;  /* толщина горизонтального */
}

html::-webkit-scrollbar-track,
.nice-scrollbar::-webkit-scrollbar-track {
  background: rgb(var(--scrollbar-track));
}

html::-webkit-scrollbar-thumb,
.nice-scrollbar::-webkit-scrollbar-thumb {
  background: rgb(var(--scrollbar-thumb));
  border-radius: 8px;
}

html::-webkit-scrollbar-thumb:hover,
.nice-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgb(var(--scrollbar-thumb-hover));
}

/* ——— Pretty scrollbar for the horizontal feed ——— */
.feed-scroll {
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: rgba(120, 144, 156, 0.7) transparent;
}

.feed-scroll::-webkit-scrollbar {
  height: 10px; /* only horizontal */
}

.feed-scroll::-webkit-scrollbar-track {
  background: transparent;
  border-radius: 9999px;
}

.feed-scroll::-webkit-scrollbar-thumb {
  background: linear-gradient(90deg, rgba(59,130,246,.65), rgba(147,51,234,.65));
  border-radius: 9999px;
  border: 2px solid transparent;         /* creates padding */
  background-clip: padding-box;
}

.feed-scroll:hover::-webkit-scrollbar-thumb {
  background: linear-gradient(90deg, rgba(59,130,246,.85), rgba(147,51,234,.85));
}